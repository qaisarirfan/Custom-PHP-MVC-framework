(function(g){function u(p,m){function j(){if(v)q();else{var l=document.createElement("script");l.src="http://www.youtube.com/player_api";var k=document.getElementsByTagName("script")[0];k.parentNode.insertBefore(l,k);window.onYouTubePlayerAPIReady=function(){q()}}}function q(){a=new YT.Player(h[0],{events:{onReady:function(){n=true;if(d.settings.reachVideoAction=="playVideo"&&!i){i=true;o()}},onStateChange:function(l){switch(l.data){case YT.PlayerState.BUFFERING:if(!f){f=true;c("start")}break;case YT.PlayerState.PLAYING:if(!f){f=
true;c("start")}if(!e){e=true;c("play")}break;case YT.PlayerState.PAUSED:if(e){e=false;c("pause")}break;case YT.PlayerState.ENDED:c("end")}}}})}function w(){a=Froogaloop(h[0]);a.addEvent("ready",function(){n=true;if(d.settings.reachVideoAction=="playVideo"&&!i){i=true;o()}a.addEvent("loadProgress",function(){if(!f){f=true;c("start")}});a.addEvent("play",function(){if(!f){f=true;c("start")}if(!e){e=true;c("play")}});a.addEvent("pause",function(){if(e){e=false;c("pause")}});a.addEvent("finish",function(){c("end")})})}
function x(){VideoJS(h.attr("id")).ready(function(){a=this;n=true;if(d.settings.reachVideoAction=="playVideo"&&!i){i=true;o()}a.addEvent("play",function(){if(!f){f=true;c("start")}if(!e){e=true;c("play")}});a.addEvent("pause",function(){if(e){e=false;c("pause")}});a.addEvent("ended",function(){c("end")});a.addEvent("enterFullWindow",function(){c("fullscreenchange")});a.addEvent("exitFullWindow",function(){c("fullscreenchange")})})}function y(){a=h[0];n=true;if(d.settings.reachVideoAction=="playVideo"&&
!i){i=true;o()}a.addEventListener("play",function(){if(!f){f=true;c("start")}if(!e){e=true;c("play")}});a.addEventListener("pause",function(){if(e){e=false;c("pause")}});a.addEventListener("ended",function(){c("end")})}function o(){if(b=="youtube-video")a.playVideo();else if(b=="vimeo-video")a.api("play");else if(b=="html5-video-js")a.play();else b=="html5-video"&&a.play()}function r(){if(b=="youtube-video"){a.seekTo(1);a.stopVideo()}else if(b=="vimeo-video"){a.api("pause");a.api("unload")}else if(b==
"html5-video-js"){a.currentTime(0);a.pause()}else if(b=="html5-video"){a.currentTime=0;a.pause()}}function s(){if(b=="youtube-video")a.pauseVideo();else if(b=="vimeo-video")a.api("pause");else if(b=="html5-video-js")a.pause();else b=="html5-video"&&a.pause()}function t(){if(b=="youtube-video")a.stopVideo();else if(b=="vimeo-video")a.api("pause");else if(b=="html5-video-js")a.pause();else b=="html5-video"&&a.pause()}function c(l){var k={type:l};switch(l){case "start":g.isFunction(d.settings.start)&&
d.settings.start.call(this,k);break;case "play":g.isFunction(d.settings.play)&&d.settings.play.call(this,k);break;case "pause":g.isFunction(d.settings.pause)&&d.settings.pause.call(this,k);break;case "end":g.isFunction(d.settings.end)&&d.settings.end.call(this,k);break;case "fullscreenchange":g.isFunction(d.settings.fullscreenchange)&&d.settings.fullscreenchange.call(this,k)}}this.settings=g.extend({},g.fn.videoController.defaults,m);var h=g(p),d=this,b,a,v=window.YT&&window.YT.Player,n=false,i=false,
f=false,e=false;if(h.is("iframe")&&h.attr("src").indexOf("youtube")!=-1)b="youtube-video";else if(h.is("iframe")&&h.attr("src").indexOf("vimeo")!=-1)b="vimeo-video";else if(h.hasClass("video video-js"))b="html5-video-js";else if(h.is("video")&&h.hasClass("video")&&!(g.browser.msie&&parseInt(g.browser.version)<9))b="html5-video";switch(b){case "youtube-video":j();break;case "vimeo-video":w();break;case "html5-video-js":x();break;case "html5-video":y()}this.reachVideo=function(){if(d.settings.reachVideoAction==
"playVideo"&&n&&!i){i=true;o()}};this.leaveVideo=function(){i=false;if(f&&a)if(d.settings.leaveVideoAction=="stopVideo")r();else if(d.settings.leaveVideoAction=="pauseVideoAndBuffering")t();else d.settings.leaveVideoAction=="pauseVideo"&&s()};this.stopVideo=r;this.pauseVideo=s;this.pauseVideoAndBuffering=t}g.fn.videoController=function(p){for(var m=[],j=0;j<this.length;j++){if(!this[j].videoControllerInstance)this[j].videoControllerInstance=new u(this[j],p);m.push(this[j].videoControllerInstance)}return m.length>
1?m:m[0]};g.fn.videoController.defaults={start:null,play:null,pause:null,end:null,fullscreenchange:null,reachVideoAction:"none",leaveVideoAction:"pauseVideo"}})(jQuery);
